from numpy import array
import sys
sh_run_lines='''
'''
inp_scf_lines='''
'''
inp_nscf_lines='''
'''
inp_pw2w90_lines='''
'''
inp_w90_lines='''
'''
inp_geninterpkpt_lines='''
'''
bohrtoA=0.529177210903
Atobohr=1.0/bohrtoA

alat_c=25.0


print(len(sys.argv))
if len(sys.argv)!=3:
  exit('usage: python velocity Nq sys_name')
Nq=eval(sys.argv[1])
sys_name=sys.argv[2]
print('Nq,sys_name',Nq,sys_name)

if sys_name=='mos2' :
  alat_a=3.184
  zdis=3.12710
  Nbnd_scf=34
  atpc=[['Mo',    0.0,     0.0, 0.0            ,2],
        ['S ',1.0/3.0,2.0/3.0 , zdis/2.0/alat_c,1],
        ['S ',1.0/3.0,2.0/3.0 ,-zdis/2.0/alat_c,1]]


if sys_name=='mose2' :
  alat_a=3.3197
  zdis=3.338
  Nbnd_scf=34
  nbnd_w90=22
  atpc=[['Mo',    0.0,     0.0, 0.0            ,2],
        ['Se',1.0/3.0,2.0/3.0 , zdis/2.0/alat_c,2],
        ['Se',1.0/3.0,2.0/3.0 ,-zdis/2.0/alat_c,2]]


if sys_name=='ws2' :
  alat_a=3.1859
  zdis=3.14559
  Nbnd_scf=48
  nbnd_w90=32
  atpc=[['W ',    0.0,     0.0, 0.0            ,3],
        ['S ',1.0/3.0,2.0/3.0 , zdis/2.0/alat_c,1],
        ['S ',1.0/3.0,2.0/3.0 ,-zdis/2.0/alat_c,1]]
#
#
if sys_name=='wse2' :
  alat_a=3.319
  zdis=3.3585
  Nbnd_scf=48
  nbnd_w90=32
  atpc=[['W ',    0.0,     0.0, 0.0            ,3],
        ['Se',1.0/3.0,2.0/3.0 , zdis/2.0/alat_c,2],
        ['Se',1.0/3.0,2.0/3.0 ,-zdis/2.0/alat_c,2]]


# old version
#nbnd_w90=2*((atpc[0][4]+1)**2+
#              (atpc[1][4]+1)**2+
#              (atpc[2][4]+1)**2)
#proj1=atpc[0][0]+':'
#for i in range(atpc[0][4]):
#  proj1=proj1+'l=%d;'%i
#proj1=proj1+'l=%d'%(atpc[0][4])
#proj2=atpc[1][0]+':'
#for i in range(atpc[1][4]):
#  proj2=proj2+'l=%d;'%i
#proj2=proj2+'l=%d'%(atpc[1][4])


nbnd_w90=22
proj1=atpc[0][0]+':l=2'
proj2=atpc[1][0]+':l=1'


norb_wan=nbnd_w90
#Nq=300

indbndexclude_min=1
indbndexclude_max=Nbnd_scf-nbnd_w90

# element, x, y, z, Nl=projections in w90
atom_pos_lines=               '%s %18.16f %18.16f %18.16f\n'%(atpc[0][0],atpc[0][1],atpc[0][2],atpc[0][3])
atom_pos_lines=atom_pos_lines+'%s %18.16f %18.16f %18.16f\n'%(atpc[1][0],atpc[1][1],atpc[1][2],atpc[1][3])
atom_pos_lines=atom_pos_lines+'%s %18.16f %18.16f %18.16f\n'%(atpc[2][0],atpc[2][1],atpc[2][2],atpc[2][3])

Nkscf=6


Ngrid=Nq*Nq


[a11,a12,a13]=array([ 1.0,     0.0,0.0])*alat_a*Atobohr
[a21,a22,a23]=array([-0.5,3**0.5/2,0.0])*alat_a*Atobohr
[a31,a32,a33]=array([ 0.0,     0.0,1.0])*alat_c*Atobohr
unitcell_cart_lines='%18.14f %18.14f %18.14f\n'%(a11,a12,a13)
unitcell_cart_lines=unitcell_cart_lines+'%18.14f %18.14f %18.14f\n'%(a21,a22,a23)
unitcell_cart_lines=unitcell_cart_lines+'%18.14f %18.14f %18.14f\n'%(a31,a32,a33)




sh_run_lines='''#!/bin/bash
#----------------------------------------------------
# Sample Slurm job script
#   for TACC Stampede2 KNL nodes
#
#   *** MPI Job on Normal Queue ***
# 
# Last revised: 20 Oct 2017
#
# Notes:
#
#   -- Launch this script by executing
#      "sbatch knl.mpi.slurm" on Stampede2 login node.
#
#   -- Use ibrun to launch MPI codes on TACC systems.
#      Do not use mpirun or mpiexec.
#
#   -- Max recommended MPI tasks per KNL node: 64-68
#      (start small, increase gradually).
#
#   -- If you're running out of memory, try running
#      fewer tasks per node to give each task more memory.
#
#----------------------------------------------------

#SBATCH -J myjob           # Job name
#SBATCH -o myjob.o%%j       # Name of stdout output file
#SBATCH -e myjob.e%%j       # Name of stderr error file
#SBATCH -p normal          # Queue (partition) name
#SBATCH -N 3              # Total # of mpi tasks
#SBATCH -n 168              # Total # of mpi tasks
#SBATCH -t 1:00:00        # Run time (hh:mm:ss)
#SBATCH --mail-user=username@tacc.utexas.edu
#SBATCH --mail-type=all    # Send email at begin and end of job
##SBATCH -A  TG-CHE190065      # Allocation name (req'd if you have more than 1)

# Other commands must follow all #SBATCH directives...

#module load gcc fftw3
module load gcc/9.1.0  mvapich2/2.3.7
module load qe/7.0
module list
pwd
date
ln -s ../*upf .
ibrun -n 28   pw.x -nk 7 <scf.in >scf.out
ibrun -n 144   pw.x -nk 144 <nscf.in >nscf.out
ibrun -n 1   /home1/06975/zxiao/build/w90/wannier90-3.1.0/wannier90.x -pp w90_%s
ibrun -n 144   pw2wannier90.x <pw2w90.in >pw2w90.out 
ibrun -n 20   /home1/06975/zxiao/build/w90/wannier90-3.1.0/wannier90.x  w90_%s
ibrun -n 20   /home1/06975/zxiao/build/w90/wannier90-3.1.0/postw90.x  w90_%s
'''%(sys_name,sys_name,sys_name)

#####################scf input

inp_scf_lines='''
&control
 calculation = "scf"
 prefix = "%s"
 pseudo_dir = "./"
 outdir = "./dout"
 verbosity = 'high'
 wf_collect=.true.
/
&system
 ibrav = 4
 A = %f
 C = %f
 nat = 3
 ntyp = 5
 ecutwfc = 60.0
 noncolin = .true.,
 lspinorb = .true.,
 nbnd = %d
/
&electrons
 electron_maxstep = 100
 conv_thr =  1.0e-7
/
ATOMIC_SPECIES
Mo    95.96   Mo_ONCV_PBE_FR-1.0.upf
S     32.06    S_ONCV_PBE_FR-1.1.upf
W    183.84    W_ONCV_PBE_FR-1.0.upf
Se    78.96   Se_ONCV_PBE_FR-1.1.upf
O     16.00    O_ONCV_PBE_FR-1.0.upf

ATOMIC_POSITIONS crystal
%s

K_POINTS automatic
%d %d 1 0 0 0
'''%(sys_name,alat_a,alat_c,Nbnd_scf,atom_pos_lines,Nkscf,Nkscf)

inp_nscf_lines='''
&control
 calculation = "nscf"
 prefix = "%s"
 pseudo_dir = "./"
 outdir = "./dout"
 verbosity = 'high'
 wf_collect=.true.
/
&system
 ibrav = 4
 A = %f
 C = %f
 nat = 3
 ntyp = 5
 ecutwfc = 60.0
 noncolin = .true.,
 lspinorb = .true.,
 nbnd = %d
/
&electrons
 electron_maxstep = 100
 conv_thr =  1.0e-7
/
ATOMIC_SPECIES
Mo    95.96   Mo_ONCV_PBE_FR-1.0.upf
S     32.06    S_ONCV_PBE_FR-1.1.upf
W    183.84    W_ONCV_PBE_FR-1.0.upf
Se    78.96   Se_ONCV_PBE_FR-1.1.upf
O     16.00    O_ONCV_PBE_FR-1.0.upf

ATOMIC_POSITIONS crystal
%s


K_POINTS crystal
144
       0.000000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.000000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.000000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.000000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.916666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.916666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.916666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.916666666667       0.000000000000   6.944444444444e-03
'''%(sys_name,alat_a,alat_c,Nbnd_scf,atom_pos_lines)

inp_pw2w90_lines='''
&inputpp
   outdir = './dout'
   prefix = "%s"
   seedname = "w90_%s"
!  spin_component = 'none'
   write_mmn = .true.
   write_amn = .true.
   write_unk = .false.
/
'''%(sys_name,sys_name)
#####################qe input



#####################postw90 input
inp_geninterpkpt_lines='#%s\ncrystal\n%d\n'%(sys_name,Ngrid)
for i in range(Nq):
  for j in range(Nq):
    kx=i*1.0/Nq
    ky=j*1.0/Nq
    kz=0.0
    ind=i*Nq+j+1
    l='%10d   %24.18f  %24.18f  %24.18f\n'%(ind,kx,ky,kz) 
    inp_geninterpkpt_lines=inp_geninterpkpt_lines+l
#####################postw90 input



#####################w90 input
inp_w90_lines='''
begin projections
%s
%s
end projections

length_unit = bohr

spinors=true
num_bands %d
num_wann  %d
exclude_bands : %d-%d
#iprint   2
dis_win_min    -10.00
dis_win_max     10.0
dis_froz_min   -10
dis_froz_max    10.0
num_iter       500
#restart = plot
bands_plot = .true.
begin kpoint_path
G 0.0       0.0       0.0      M 0.5           0.0          0.0
M 0.5       0.0       0.0      K 0.3333333333  0.333333333  0.0
K 0.3333333333  0.333333333  0.000000 G 0.0    0.0          0.0
end kpoint_path
bands_num_points 100
bands_plot_format = gnuplot

guiding_centres = .true.

begin atoms_frac
%s
end atoms_frac

begin unit_cell_cart
bohr
%s
end unit_cell_cart

DOS = False
kmesh %d %d 1 
geninterp = TRUE
geninterp_alsofirstder = .true.
use_ws_distance=.true.

mp_grid : 12  12  1
begin kpoints
       0.000000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.000000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.000000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.000000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.000000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.000000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.083333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.083333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.083333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.166666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.166666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.166666666667       0.916666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.250000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.250000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.250000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.333333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.333333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.333333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.416666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.416666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.416666666667       0.916666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.500000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.500000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.500000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.583333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.583333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.583333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.666666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.666666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.666666666667       0.916666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.000000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.083333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.166666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.250000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.333333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.416666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.500000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.583333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.666666666667       0.000000000000   6.944444444444e-03
       0.750000000000       0.750000000000       0.000000000000   6.944444444444e-03
       0.750000000000       0.833333333333       0.000000000000   6.944444444444e-03
       0.750000000000       0.916666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.000000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.083333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.166666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.250000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.333333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.416666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.500000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.583333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.666666666667       0.000000000000   6.944444444444e-03
       0.833333333333       0.750000000000       0.000000000000   6.944444444444e-03
       0.833333333333       0.833333333333       0.000000000000   6.944444444444e-03
       0.833333333333       0.916666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.000000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.083333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.166666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.250000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.333333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.416666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.500000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.583333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.666666666667       0.000000000000   6.944444444444e-03
       0.916666666667       0.750000000000       0.000000000000   6.944444444444e-03
       0.916666666667       0.833333333333       0.000000000000   6.944444444444e-03
       0.916666666667       0.916666666667       0.000000000000   6.944444444444e-03
end kpoints

'''%(proj1,proj2,nbnd_w90,norb_wan,indbndexclude_min,indbndexclude_max,atom_pos_lines,unitcell_cart_lines,Nq,Nq)

#####################w90 input

fls=[sh_run_lines,inp_scf_lines,inp_nscf_lines,inp_pw2w90_lines,inp_w90_lines,inp_geninterpkpt_lines]
fns=['job.sh','scf.in','nscf.in','pw2w90.in','w90_'+sys_name+'.win','w90_'+sys_name+'_geninterp.kpt']
for [fn,fl] in zip(fns,fls):
  with open(fn,'w') as fh:
    fh.write(fl)
